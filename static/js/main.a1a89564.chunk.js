(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{21:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__y8tne",dialogsItems:"Dialogs_dialogsItems__2boNC",messagesItems:"Dialogs_messagesItems__14XTq",dialog:"Dialogs_dialog__2ALfl",message:"Dialogs_message__JO2PK"}},38:function(e,t,n){e.exports={header:"header_header__1d4qC",loginBlock:"header_loginBlock__1c3gx"}},41:function(e,t,n){e.exports={userphoto:"Users_userphoto__1rDJj",content:"Users_content__JY7x2",selectedPage:"Users_selectedPage__-9CLr"}},42:function(e,t,n){e.exports={post:"Post_post__28iDt",like:"Post_like__2akoI"}},55:function(e,t,n){e.exports={nav:"Navbar_nav__3Bmxc"}},56:function(e,t,n){e.exports={music:"Music_music__3O5SO"}},57:function(e,t,n){e.exports={news:"News_news__3BMLP"}},58:function(e,t,n){e.exports={settings:"Settings_settings__3oUvI"}},59:function(e,t,n){e.exports={wrapper_post:"MyPosts_wrapper_post__2uP0d"}},60:function(e,t,n){e.exports={ava:"ProfileInfo_ava__398L5",profile:"ProfileInfo_profile__1PiDD"}},64:function(e,t,n){e.exports=n(93)},70:function(e,t,n){},71:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(31),r=n(5),s=n(6),o={PostData:[{id:1,message:"Hi,how are you?",like:15},{id:2,message:"It's my first post",like:33},{id:3,message:"It's my first post",like:49},{id:4,message:"It's my first post",like:1}],newPostText:"Hi!",profile:null},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:5,message:e.newPostText,like:0};return Object(s.a)({},e,{PostData:[].concat(Object(r.a)(e.PostData),[n]),newPostText:""});case"UPDATE-NEW-POST-TEXT":return Object(s.a)({},e,{newPostText:t.newText});case"SET_USER_PROFILE ":return Object(s.a)({},e,{profile:t.profile});default:return e}},i={DialogsData:[{id:1,name:"Andrey"},{id:2,name:"Victor"},{id:3,name:"Olga"},{id:4,name:"Anna"},{id:5,name:"Egor"},{id:6,name:"Egor"}],MessageData:[{id:1,message:"Hi!"},{id:2,message:"How are you?"},{id:3,message:"It's fine"}],newMessageText:""},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE-NEW-MESSAGE-TEXT":return Object(s.a)({},e,{newMessageText:t.newMessage});case"SEND_MESSAGE":var n=e.newMessageText;return Object(s.a)({},e,{newMessageText:"",MessageData:[].concat(Object(r.a)(e.MessageData),[{id:7,message:n}])});default:return e}},u={Friends:[{id:1,name:"Andrey"},{id:2,name:"Anna"},{id:3,name:"Viktor"}]},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;arguments.length>1&&arguments[1];return e},m={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(s.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(s.a)({},e,{followed:!0}):e}))});case"UNFOLLOW":return Object(s.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(s.a)({},e,{followed:!1}):e}))});case"SET_USERS":return Object(s.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(s.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(s.a)({},e,{totalUsersCount:t.count});case"TOOGLE_IS_FETCHING":return Object(s.a)({},e,{isFetching:t.isFetching});case"TOOGLE_IS_FOLLOWING_PROGRESS":return Object(s.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(r.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},d={id:null,email:null,login:null,isAuth:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(s.a)({},e,{},t.data,{isAuth:!0});default:return e}},E=Object(a.b)({ProfilePage:l,DialogsPage:c,NavbarPage:g,UsersPage:p,auth:f}),h=Object(a.c)(E);window.store=h;var P=h,_=n(0),v=n.n(_),w=n(18),O=n.n(w),b=(n(70),n(71),n(26)),T=n(14),S=n(27),U=n(28),j=n(29),y=n(38),I=n.n(y),N=n(7),C=function(e){return v.a.createElement("header",{className:I.a.header},v.a.createElement("img",{src:"https://st2.depositphotos.com/5904380/12124/v/950/depositphotos_121244762-stock-illustration-logo-industry-factory.jpg",alt:""}),"Welcome",v.a.createElement("div",{className:I.a.loginBlock},e.isAuth?e.login:v.a.createElement(N.b,{to:"/login"},"Login")))},D=n(23),k=n(12),F=function(e){function t(){return Object(b.a)(this,t),Object(S.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.get("https://social-network.samuraijs.com/api/1.0/auth/me",{withCredentials:!0}).then((function(t){if(0===t.data.resultCode){var n=t.data.data,a=n.id,r=n.email,s=n.login;e.props.setAuthUserData(a,r,s)}}))}},{key:"render",value:function(){return v.a.createElement(C,this.props)}}]),t}(v.a.Component),x=Object(k.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:function(e,t,n){return{type:"SET_USER_DATA",data:{userId:e,email:t,login:n}}}})(F),A=n(55),M=n.n(A),L=function(e){return v.a.createElement("nav",{className:M.a.nav},v.a.createElement("ul",null,v.a.createElement("li",null,v.a.createElement(N.b,{to:"/profile"},"Profile")),v.a.createElement("li",null,v.a.createElement(N.b,{to:"/dialogs"},"Messages")),v.a.createElement("li",null,v.a.createElement(N.b,{to:"/news"},"News")),v.a.createElement("li",null,v.a.createElement(N.b,{to:"/music"},"Music")),v.a.createElement("li",null,v.a.createElement(N.b,{to:"/settings"},"Settings")),v.a.createElement("li",null,v.a.createElement(N.b,{to:"/users"},"Users"))))},R=n(56),G=n.n(R),W=function(e){return v.a.createElement("div",{className:G.a.music},"Music")},B=n(57),z=n.n(B),H=function(e){return v.a.createElement("div",{className:z.a.news},"News")},J=n(58),X=n.n(J),q=function(e){return v.a.createElement("div",{className:X.a.settings},"Settings")},K=n(22),V=n(21),Y=n.n(V),$=function(e){var t="/Dialogs/"+e.id;return v.a.createElement("div",{className:Y.a.dialog},v.a.createElement(N.b,{to:t},e.name))},Q=function(e){return v.a.createElement("div",{className:Y.a.message},e.message)},Z=function(e){var t=e.DialogsPage,n=t.DialogsData.map((function(e){return v.a.createElement($,{name:e.name,id:e.id})})),a=t.MessageData.map((function(e){return v.a.createElement(Q,{message:e.message})})),r=t.newMessageText;return v.a.createElement("div",{className:Y.a.dialogs},v.a.createElement("div",{className:Y.a.dialogsItems},n),v.a.createElement("div",{className:Y.a.messagesItems},v.a.createElement("textarea",{placeholder:"Enter the message",value:r,onChange:function(t){var n=t.target.value;e.updateNewMessageText(n)}}),v.a.createElement("button",{onClick:function(){e.sendMessage()}},"Add message"),a))},ee=Object(k.b)((function(e){return{DialogsPage:e.DialogsPage}}),(function(e){return{sendMessage:function(){e({type:"SEND_MESSAGE"})},updateNewMessageText:function(t){e(function(e){return{type:"UPDATE-NEW-MESSAGE-TEXT",newMessage:e}}(t))}}}))(Z),te=n(41),ne=n.n(te),ae=n(109),re=n(112),se=Object(ae.a)((function(e){return{root:{"& > *":{marginTop:e.spacing(2),marginBottom:20}}}})),oe=function(e){var t=se(),n=Math.ceil(e.totalUsersCount/e.pageSize);return v.a.createElement("div",{className:t.root},v.a.createElement(re.a,{count:n,shape:"rounded",color:"primary",page:e.currentPage,showFirstButton:!0,showLastButton:!0,onChange:function(t,n){e.onPageChanged(n)}}))},le=D.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"8cdd1806-577d-4e37-9ff9-cfb9def3dba4"}}),ie={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return le.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))}},ce=function(e){return v.a.createElement(v.a.Fragment,null,v.a.createElement(oe,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:e.onPageChanged}),e.users.map((function(t){return v.a.createElement("div",{key:t.id},v.a.createElement("span",null,v.a.createElement("div",null,v.a.createElement(N.b,{to:"/profile/"+t.id},v.a.createElement("img",{src:null!=t.photos.small?t.photos.small:"https://cs8.pikabu.ru/post_img/2017/01/24/8/1485265069188571085.jpg",className:ne.a.userphoto}))),v.a.createElement("div",null,t.followed?v.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){var n;e.toogleFollowingProgress(!0,t.id),(n=t.id,le.delete("follow/".concat(n)).then((function(e){return e.data}))).then((function(n){0===n.resultCode&&e.unfollow(t.id)})),e.toogleFollowingProgress(!1,t.id)}}," UnFollow"):v.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){var n;e.toogleFollowingProgress(!0,t.id),(n=t.id,le.post("follow/".concat(n),{}).then((function(e){return e.data}))).then((function(n){0===n.resultCode&&e.follow(t.id)})),e.toogleFollowingProgress(!1,t.id)}}," Follow"))),v.a.createElement("span",null,v.a.createElement("span",{className:ne.a.content},v.a.createElement("div",null," ",t.name," "),v.a.createElement("div",null," ",t.status," "))))})))},ue=n(111),ge=Object(ae.a)((function(e){return{root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)},marginBottom:20}}})),me=function(e){var t=ge();return v.a.createElement("div",{className:t.root},v.a.createElement(ue.a,null))},pe=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).onPageChanged=function(e){n.props.toogleIsFetching(!0),n.props.setCurrentPage(e),ie.getUsers(e,n.props.pageSize).then((function(e){n.props.toogleIsFetching(!1),n.props.setUsers(e.items)}))},n}return Object(j.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.toogleIsFetching(!0),ie.getUsers(this.props.currentPage,this.props.pageSize).then((function(t){e.props.toogleIsFetching(!1),e.props.setUsers(t.items),e.props.setTotalUsersCount(t.totalCount)}))}},{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,this.props.isFetching?v.a.createElement(me,null):null,v.a.createElement(ce,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,onPageChanged:this.onPageChanged,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,currentPage:this.props.currentPage,toogleFollowingProgress:this.props.toogleFollowingProgress,followingInProgress:this.props.followingInProgress}))}}]),t}(v.a.Component),de=Object(k.b)((function(e){return{users:e.UsersPage.users,pageSize:e.UsersPage.pageSize,totalUsersCount:e.UsersPage.totalUsersCount,currentPage:e.UsersPage.currentPage,isFetching:e.UsersPage.isFetching,followingInProgress:e.UsersPage.followingInProgress}}),{follow:function(e){return{type:"FOLLOW",userId:e}},unfollow:function(e){return{type:"UNFOLLOW",userId:e}},setUsers:function(e){return{type:"SET_USERS",users:e}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},setTotalUsersCount:function(e){return{type:"SET_TOTAL_USERS_COUNT",count:e}},toogleIsFetching:function(e){return{type:"TOOGLE_IS_FETCHING",isFetching:e}},toogleFollowingProgress:function(e,t){return{type:"TOOGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}}})(pe),fe=n(59),Ee=n.n(fe),he=n(42),Pe=n.n(he),_e=function(e){return v.a.createElement("div",{className:Pe.a.post},v.a.createElement("img",{src:"https://toptos.com.ua/content/images/5/populyarnyy-popsoket-pop-socket-dlya-parnya-dart-veyder-56860954500598_small11.jpg",alt:""}),v.a.createElement("div",null,e.message),v.a.createElement("div",{className:Pe.a.like},v.a.createElement("span",null,"like: "),e.like))},ve=function(e){var t=e.post.map((function(e){return v.a.createElement(_e,{message:e.message,like:e.like})})),n=v.a.createRef();return v.a.createElement("div",{className:Ee.a.wrapper_post},v.a.createElement("h3",null,"My posts"),v.a.createElement("div",null,v.a.createElement("textarea",{onChange:function(){var t=n.current.value;e.updateNewPostText(t)},ref:n,cols:"60",rows:"6",value:e.newPostText}),v.a.createElement("div",null,v.a.createElement("button",{onClick:function(){e.addPost()}},"Add post"))),t)},we=Object(k.b)((function(e){return{post:e.ProfilePage.PostData,newPostText:e.ProfilePage.newPostText}}),{updateNewPostText:function(e){return{type:"UPDATE-NEW-POST-TEXT",newText:e}},addPost:function(){return{type:"ADD-POST"}}})(ve),Oe=n(60),be=n.n(Oe),Te=function(e){if(!e.profile)return v.a.createElement(me,null);var t=e.profile.photos.small;return t||(t="https://cs8.pikabu.ru/post_img/2017/01/24/8/1485265069188571085.jpg"),v.a.createElement("div",{className:be.a.ava},v.a.createElement("div",null,e.profile.fullName),v.a.createElement("img",{src:t}),v.a.createElement("div",null,e.profile.aboutMe))},Se=function(e){return v.a.createElement("div",null,v.a.createElement(Te,{profile:e.profile}),v.a.createElement(we,null))},Ue=function(e){function t(){return Object(b.a)(this,t),Object(S.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;t||(t=2),D.get("https://social-network.samuraijs.com/api/1.0/profile/"+t).then((function(t){e.props.setUserProfile(t.data)}))}},{key:"render",value:function(){return v.a.createElement(Se,Object.assign({},this.props,{profile:this.props.profile}))}}]),t}(v.a.Component),je=Object(K.e)(Ue),ye=Object(k.b)((function(e){return{profile:e.ProfilePage.profile}}),{setUserProfile:function(e){return{type:"SET_USER_PROFILE ",profile:e}}})(je),Ie=function(e){return v.a.createElement(N.a,null,v.a.createElement("div",{className:"app-wrapper"},v.a.createElement(x,null),v.a.createElement(L,null),v.a.createElement("div",{className:"app-wrapper-content"},v.a.createElement(K.a,{path:"/profile/:userId?",render:function(){return v.a.createElement(ye,null)}}),v.a.createElement(K.a,{path:"/dialogs",render:function(){return v.a.createElement(ee,null)}}),v.a.createElement(K.a,{path:"/music",render:function(){return v.a.createElement(W,null)}}),v.a.createElement(K.a,{path:"/news",render:function(){return v.a.createElement(H,null)}}),v.a.createElement(K.a,{path:"/users",render:function(){return v.a.createElement(de,null)}}),v.a.createElement(K.a,{path:"/settings",render:function(){return v.a.createElement(q,null)}}))))};O.a.render(v.a.createElement(N.a,null,v.a.createElement(k.a,{store:P},v.a.createElement(Ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,1,2]]]);
//# sourceMappingURL=main.a1a89564.chunk.js.map